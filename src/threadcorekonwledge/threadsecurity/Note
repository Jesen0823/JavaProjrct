一，线程安全问题
业务中不管遇到怎样的多个线程访问某对象或某方法，在编辑业务逻辑的时候，都不需要做额外的处理，程序也可以得到预期的结果，就可以称为线程安全。


1.a++多线程下出现异常
2.活跃性问题：死锁，活锁，饥饿
3.对象发布和初始化时候的安全问题
4.什么是逸出？
1）方法直接返回了一个private对象
解决：返回一个副本
2）还未完成初始化，就把对象提供给外界
解决：用工厂模式
3）在构造函数中未初始化完毕就this赋值
4）隐士逸出---注册监听事件
5）改造函数中运行线程

5.多线程的性能问题
1）调度，即上下文切换，缓存开销很大。线程数量超过cpu数量，就需要调度线程，要挂起一个线程，为了后续切换回来继续执行，会保存当前数据和指令
2）协作：内存同步


何时会导致密集的上下文切换？
枪锁或许IO操作引起的频繁线程调度


二，面试问题
1.一共有哪几类线程安全问题？
2.哪些场景需要额外注意线程安全问题？
3.关于线程的上下文切换